{% extends 'layout.html' %}
{% block title%}
    Bless Library
{% endblock %}

{% block content %}
<div class='bg-bless'>

    <div class="input-container">
        <h1>Bless Blocks</h1>
        <p>Manage your blessings and create new ones.</p>
    </div>

<div>
<button id='preset-btn' class='button-page'>Preset Blocks</button>
<button id='custom-btn' class='button-page'>Custom Blocks</button>
</div>

<!-- Modal -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog">


        <!-- Scrollable modal -->
        <div class="modal-content model-custom">
            <div class="modal-header">
                <h4 class="modal-title">Bless Title</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="tab text-field">
                <pre class="hebrew">
וַיְהִי עֶרֶב וַיְהִי בֹקֶר
יוֹם הַשִּׁשִּׁי. וַיְכֻלּוּ הַשָּׁמַיִם וְהָאָרֶץ וְכָל צְבָאָם
וַיְכַל אֱלֹהִים בַּיּום הַשְּׁבִיעִי מְלַאכְתּו אֲשֶׁר עָשָׂה. וַיִּשְׁבּת בַּיּום הַשְּׁבִיעִי מִכָּל מְלַאכְתּו אֲשֶׁר עָשָׂה
וַיְבָרֶךְ אֱלֹהִים אֶת יוֹם הַשְּׁבִיעִי וַיְקַדֵּשׁ אֹתוֹ. כִּי בוֹ שָׁבַת מִכָּל מְלַאכְתּו אֲשֶׁר בָּרָא אֱלֹהִים לַעֲשׂות

סַבְרִי מָרָנָן וְרַבָּנָן וְרַבּותַי

(!לחיים)
                </pre>
            </div>
            <div class="tab text-field">
                <pre class="english">Bold.org is built for students, like you, who are determined to make the climb.

                    As you join the Bold.org platform, you get the opportunity to showcase your goals, achievements, and drive to scholarship panels via your student profile.
                    
                    The $25,000 “Be Bold” Scholarship is a no-essay scholarship that will be awarded to the applicant with the boldest profile.
                    
                    To us, boldest does not mean “best”, or “most accomplished”. Being bold means being:
                    </pre>
            </div>
            <div class="tab text-field"> <pre class="english">words</pre></div>
            <div class="tab text-field"> <pre class="english">words</pre></div>
            <div id='buttonplacement'>
                <button id='back' type="button" class="nextprev prev">Back</button>
                <button id='next' type="button" class="nextprev next">Next</button>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <div id="functions">
                    <button id='enter' type='submit' class="btn btn-primary">Enter</button>
                    
                    <button id='delete' type='button' class="btn btn-danger">Delete</button>
                </div>
            </div>
        </div>
    </div>

</div>


<div>
    <div id="preset">
    <ul class='list' id='preset'>
        {% for bless in genBless %}
        <li>
            <div bless-value='{{ bless.id }}' class="bless bless_normal" data-toggle="modal" data-target="#myModal">  
                <h2 class="bless_title">{{ bless.bless_name }}</h2>
            </div>
        </li>
        {% endfor %}
    </ul>
    </div>
        <div id="custom" style="display:none">
            <ul class='list'>
                {% for bless in userBless %}
                <li>
                <div bless-value='{{ bless.id }}' class="bless bless_normal" data-toggle="modal" data-target="#myModal">  
                    <h2 class="bless_title">{{ bless.bless_name }}</h2>
                </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </ul>
</div>

<div id="bless_create_new">
    <button id='preset-btn' class='button-page'>Create Bless Block</button>    
    <a href="/create-bless" id='newbless' class="btn btn-primary">Create New Bless Block</a>
</div>
</div>

<script>
    $(document).ready(function () {
        $('.bless').on('click', function() {
            $('.tab').hide();
            var currentTab = 0;
        

            currentTab = 0;

            

            showTab(currentTab);

            function showTab(n) {
                let x = $('.tab');

                $('.tab:eq('+currentTab+')').show();

                console.log("this is show tab " + currentTab)

                if (n == 0) {
                    $("#back").hide();
                } else {
                    $('#back').show();
                }

                if (n == (x.length - 1)) {
                    $("#next").hide();
                } else {
                    $('#next').show();
                }
            }

            $('#next').on('click', function() {
                nextPrevClick(1);
                $('.tab').hide();
                showTab(currentTab);
                console.log("this is" + currentTab)      
            })

            $('#back').on('click', function() {
                nextPrevClick(-1);
                $('.tab').hide();
                showTab(currentTab);     
            })

            function nextPrevClick(n) {
            
                $('.tab:eq('+currentTab+')').hide();

                currentTab = currentTab + n;

                console.log(currentTab)

            }
        })

    })

    $(document).ready(function () {
        $('.item').removeClass('active')
        $('#blocks').addClass('active')
    })

    $(document).ready(function () {
        $('#preset-btn').on('click', function () {
            $('#custom').fadeOut(300).slideUp().delay(300);
            $('#preset').delay(300).fadeIn(300).slideDown();
            $(this).siblings().removeClass('active');
            $(this).addClass('active');
            
        })
        $('#custom-btn').on('click', function () {
            $('#preset').fadeOut(300).slideUp().delay(300);
            $('#custom').delay(300).fadeIn(300).slideDown();
            $(this).siblings().removeClass('active');
            $(this).addClass('active');
           

        })
    })

    $(document).ready(function () {
        $('.bless').on('click', function() {
            alert($(this).attr('bless-value'));
            let block_data = {bless_id : $(this).attr('bless-value')};
            let json_data = JSON.stringify(block_data)
            
            $.ajax({
                url : '/_load_bless_settings',
                type : 'post',
                contentType : "application/json",
                dataType : 'json',
                data : json_data,
                success : function(data) {
                    // load all bless data into html
                    $('.modal-title').html(data.name)
                    
                }
            })
        })
    })
</script>
{% endblock %}